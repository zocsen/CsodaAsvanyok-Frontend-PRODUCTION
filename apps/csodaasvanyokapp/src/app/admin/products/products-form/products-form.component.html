<p-toast></p-toast>

<div class="admin-main">
	<p-card [header]="editMode ? 'Termék szerkesztése': 'Termék hozzáadása'"
		subheader="Itt új termékeket tudsz létrehozni vagy szerkeszteni!">
		<div class="grid">
			<div class="col-12">
				<p-toolbar>
					<div class="p-toolbar-group-right"></div>
					<div class="p-toolbar-group-right">
						<p-button styleClass="p-button-primary mr-4" [label]="editMode ? 'Szerkesztés': 'Hozzáadás'"
							icon="pi pi-plus" (click)="onSubmit()"></p-button>
						<p-button styleClass="p-button-secondary" label="Vissza" icon="pi pi-arrow-left"
							(click)="backClicked()"></p-button>
					</div>
				</p-toolbar>
			</div>
		</div>
		<div class="grid">
			<div class="col-12">
				<form [formGroup]="form">
					<div class="card grid h-30rem">
						<div class="formgrid grid p-fluid col-6 max-h-10rem">
							<div class="field col-12">
								<label for="name">Termék neve</label>
								<input formControlName="name" id="name" type="text"
									class="text-base text-color surface-overlay p-3 border-2 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">
								<small *ngIf="productForm['name'].invalid && isSubmitted" class="p-error">A név
									szükséges!</small>
							</div>
							<div class="field col-3">
								<label for="price">Termék ára</label>
								<p-inputNumber formControlName="price" inputId="price" prefix="HUF  ">
								</p-inputNumber>
								<small *ngIf="productForm['price'].invalid && isSubmitted" class="p-error">Az ár
									szükséges!</small>
							</div>

							<div class="field col-5">
								<label for="category">Kategória</label>
								<p-dropdown [options]="categories" formControlName="category" optionLabel="name"
									optionValue="id" [showClear]="true"
									placeholder="Válassz egy kategórát"></p-dropdown>
								<small *ngIf="productForm['category'].invalid && isSubmitted" class="p-error">A
									kategória
									szükséges!</small>
							</div>
							<!-- <div class="field col-3">
								<label for="isFeatured">Kiemelt termék?</label><br>
								<p-inputSwitch formControlName="isFeatured"></p-inputSwitch>
							</div> -->
							<div class="field col-5">
								<label for="subcategory">Alkategóriák</label>
								<p-multiSelect [options]="subcategories" formControlName="subcategory"
									optionLabel="name" optionValue="id" [showClear]="true"
									placeholder="Válassz minimum 1 alkategóriát"></p-multiSelect>
								<small *ngIf="productForm['subcategory'].invalid && isSubmitted" class="p-error">Az
									alkategória
									szükséges!</small>
							</div>
							<div class="field col-5">
								<label for="mineral">Ásványok</label>
								<p-multiSelect [options]="minerals" formControlName="mineral" optionLabel="name"
									optionValue="id" [showClear]="true"
									placeholder="Válassz minimum 1 ásványt"></p-multiSelect>
								<small *ngIf="productForm['mineral'].invalid && isSubmitted" class="p-error">Az ásvány
									szükséges!</small>
							</div>
							<div class="field col-5">
								<label for="color">Színek</label>
								<p-multiSelect [options]="colors" formControlName="color" optionLabel="name"
									optionValue="id" [showClear]="true"
									placeholder="Válassz minimum 1 színt"></p-multiSelect>
								<small *ngIf="productForm['color'].invalid && isSubmitted" class="p-error">A szín
									szükséges!</small>
							</div>
							<div class="field col-5">
								<label for="image">Fő kép</label>
								<input type="file" class="p-inputtext" accept="image/*"
									(change)="onImageUpload($event)">
								<div class="mt-3">
									<img style="width: 250px" [src]="imageDisplay" alt="">
								</div>
								<small *ngIf="productForm['image'].invalid && isSubmitted" class="p-error">A kép
									feltöltése
									szükséges!</small>
							</div>
						</div>
						<div class="formgrid grid p-fluid col-6">
							<div class="field col-12">
								<label for="description">Termék leírása</label>
								<textarea rows="5" cols="30" formControlName="description" pInputTextarea
									[autoResize]="true"></textarea>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
	</p-card>
</div>